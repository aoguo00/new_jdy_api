<mxfile host="Electron" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/26.2.2 Chrome/134.0.6998.178 Electron/35.1.2 Safari/537.36" version="26.2.2" pages="7">
  <diagram id="overall_architecture" name="总体架构">
    <mxGraphModel dx="1710" dy="988" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1400" pageHeight="900" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="title" value="工控系统点表管理软件 V2.0 - 总体架构" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=24;fontStyle=1;fontColor=#1f497d;" parent="1" vertex="1">
          <mxGeometry x="400" y="20" width="600" height="40" as="geometry" />
        </mxCell>
        <mxCell id="user_layer" value="用户层" style="swimlane;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=16;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="100" y="80" width="1200" height="100" as="geometry" />
        </mxCell>
        <mxCell id="admin_user" value="系统管理员" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;fillColor=#f8cecc;strokeColor=#b85450;" parent="user_layer" vertex="1">
          <mxGeometry x="200" y="29" width="30" height="50" as="geometry" />
        </mxCell>
        <mxCell id="project_manager" value="项目经理" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="user_layer" vertex="1">
          <mxGeometry x="400" y="29" width="30" height="50" as="geometry" />
        </mxCell>
        <mxCell id="engineer" value="工程师" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;fillColor=#d5e8d4;strokeColor=#82b366;" parent="user_layer" vertex="1">
          <mxGeometry x="600" y="29" width="30" height="50" as="geometry" />
        </mxCell>
        <mxCell id="viewer" value="只读用户" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;fillColor=#fff2cc;strokeColor=#d6b656;" parent="user_layer" vertex="1">
          <mxGeometry x="800" y="29" width="30" height="50" as="geometry" />
        </mxCell>
        <mxCell id="frontend_layer" value="前端层 (Angular + Ng-Zorro)" style="swimlane;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=16;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="100" y="206" width="1200" height="120" as="geometry" />
        </mxCell>
        <mxCell id="login_module" value="登录认证" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="frontend_layer" vertex="1">
          <mxGeometry x="80" y="40" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="datasource_module" value="数据源选择" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="frontend_layer" vertex="1">
          <mxGeometry x="220" y="40" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="plc_config_module" value="PLC配置" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="frontend_layer" vertex="1">
          <mxGeometry x="360" y="40" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="device_config_module" value="第三方设备" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="frontend_layer" vertex="1">
          <mxGeometry x="500" y="40" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="io_generation_module" value="IO点表生成" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="frontend_layer" vertex="1">
          <mxGeometry x="640" y="40" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="file_preview_module" value="文件预览" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="frontend_layer" vertex="1">
          <mxGeometry x="780" y="40" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="state_management" value="状态管理(NgRx)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0f0f0;strokeColor=#666666;" parent="frontend_layer" vertex="1">
          <mxGeometry x="920" y="40" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="gateway_layer" value="API网关层 (Rust Axum)" style="swimlane;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=16;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="100" y="346" width="1200" height="80" as="geometry" />
        </mxCell>
        <mxCell id="auth_middleware" value="JWT认证" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="gateway_layer" vertex="1">
          <mxGeometry x="150" y="25" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="cors_middleware" value="CORS处理" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="gateway_layer" vertex="1">
          <mxGeometry x="300" y="25" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="api_router" value="API路由" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="gateway_layer" vertex="1">
          <mxGeometry x="450" y="25" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="file_upload" value="文件上传" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="gateway_layer" vertex="1">
          <mxGeometry x="600" y="25" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="error_handler" value="错误处理" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="gateway_layer" vertex="1">
          <mxGeometry x="750" y="25" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="request_logger" value="请求日志" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="gateway_layer" vertex="1">
          <mxGeometry x="900" y="25" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="backend_layer" value="后端服务层 (Rust + Python)" style="swimlane;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=16;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="100" y="446" width="1200" height="160" as="geometry" />
        </mxCell>
        <mxCell id="rust_services" value="Rust核心服务" style="swimlane;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="backend_layer" vertex="1">
          <mxGeometry x="50" y="30" width="500" height="110" as="geometry" />
        </mxCell>
        <mxCell id="auth_service" value="用户认证" style="rounded=1;whiteSpace=wrap;html=1;" parent="rust_services" vertex="1">
          <mxGeometry x="20" y="25" width="90" height="25" as="geometry" />
        </mxCell>
        <mxCell id="datasource_service" value="数据源管理" style="rounded=1;whiteSpace=wrap;html=1;" parent="rust_services" vertex="1">
          <mxGeometry x="130" y="25" width="90" height="25" as="geometry" />
        </mxCell>
        <mxCell id="plc_config_service" value="PLC配置" style="rounded=1;whiteSpace=wrap;html=1;" parent="rust_services" vertex="1">
          <mxGeometry x="240" y="25" width="90" height="25" as="geometry" />
        </mxCell>
        <mxCell id="device_template_service" value="设备模板" style="rounded=1;whiteSpace=wrap;html=1;" parent="rust_services" vertex="1">
          <mxGeometry x="350" y="25" width="90" height="25" as="geometry" />
        </mxCell>
        <mxCell id="jiandaoyun_service" value="简道云API" style="rounded=1;whiteSpace=wrap;html=1;" parent="rust_services" vertex="1">
          <mxGeometry x="20" y="60" width="90" height="25" as="geometry" />
        </mxCell>
        <mxCell id="file_service" value="文件管理" style="rounded=1;whiteSpace=wrap;html=1;" parent="rust_services" vertex="1">
          <mxGeometry x="130" y="60" width="90" height="25" as="geometry" />
        </mxCell>
        <mxCell id="approval_service" value="审批流程" style="rounded=1;whiteSpace=wrap;html=1;" parent="rust_services" vertex="1">
          <mxGeometry x="240" y="60" width="90" height="25" as="geometry" />
        </mxCell>
        <mxCell id="audit_service" value="操作审计" style="rounded=1;whiteSpace=wrap;html=1;" parent="rust_services" vertex="1">
          <mxGeometry x="350" y="60" width="90" height="25" as="geometry" />
        </mxCell>
        <mxCell id="python_services" value="Python文件处理服务" style="swimlane;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="backend_layer" vertex="1">
          <mxGeometry x="570" y="30" width="300" height="110" as="geometry" />
        </mxCell>
        <mxCell id="xls_processor" value="XLS文件处理" style="rounded=1;whiteSpace=wrap;html=1;" parent="python_services" vertex="1">
          <mxGeometry x="20" y="25" width="100" height="25" as="geometry" />
        </mxCell>
        <mxCell id="ai_document_parser" value="AI文档解析" style="rounded=1;whiteSpace=wrap;html=1;" parent="python_services" vertex="1">
          <mxGeometry x="140" y="25" width="100" height="25" as="geometry" />
        </mxCell>
        <mxCell id="io_table_generator" value="IO点表生成" style="rounded=1;whiteSpace=wrap;html=1;" parent="python_services" vertex="1">
          <mxGeometry x="20" y="60" width="100" height="25" as="geometry" />
        </mxCell>
        <mxCell id="multi_format_export" value="多格式导出" style="rounded=1;whiteSpace=wrap;html=1;" parent="python_services" vertex="1">
          <mxGeometry x="140" y="60" width="100" height="25" as="geometry" />
        </mxCell>
        <mxCell id="external_apis" value="外部API集成" style="swimlane;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="backend_layer" vertex="1">
          <mxGeometry x="890" y="30" width="280" height="110" as="geometry" />
        </mxCell>
        <mxCell id="third_party_api" value="第三方API" style="rounded=1;whiteSpace=wrap;html=1;" parent="external_apis" vertex="1">
          <mxGeometry x="20" y="25" width="100" height="25" as="geometry" />
        </mxCell>
        <mxCell id="ai_service_api" value="AI服务API" style="rounded=1;whiteSpace=wrap;html=1;" parent="external_apis" vertex="1">
          <mxGeometry x="140" y="25" width="100" height="25" as="geometry" />
        </mxCell>
        <mxCell id="platform_upload" value="平台上传" style="rounded=1;whiteSpace=wrap;html=1;" parent="external_apis" vertex="1">
          <mxGeometry x="80" y="60" width="100" height="25" as="geometry" />
        </mxCell>
        <mxCell id="data_layer" value="数据层" style="swimlane;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=16;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="100" y="626" width="1200" height="120" as="geometry" />
        </mxCell>
        <mxCell id="postgresql_db" value="PostgreSQL数据库" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#f8cecc;strokeColor=#b85450;" parent="data_layer" vertex="1">
          <mxGeometry x="150" y="30" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="file_storage" value="文件存储" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#d5e8d4;strokeColor=#82b366;" parent="data_layer" vertex="1">
          <mxGeometry x="340" y="30" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="config_storage" value="配置存储" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#fff2cc;strokeColor=#d6b656;" parent="data_layer" vertex="1">
          <mxGeometry x="540" y="30" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="backup_storage" value="备份存储" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="data_layer" vertex="1">
          <mxGeometry x="720" y="30" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="log_storage" value="日志存储" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="data_layer" vertex="1">
          <mxGeometry x="900" y="30" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="external_layer" value="外部系统层" style="swimlane;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=16;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="100" y="766" width="1200" height="80" as="geometry" />
        </mxCell>
        <mxCell id="jiandaoyun_api" value="简道云API" style="ellipse;shape=cloud;whiteSpace=wrap;html=1;fillColor=#e1d5e7;fontColor=#333333;strokeColor=#9673a6;" parent="external_layer" vertex="1">
          <mxGeometry x="250" y="30" width="150" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ai_services" value="AI服务" style="ellipse;shape=cloud;whiteSpace=wrap;html=1;fillColor=#f8cecc;fontColor=#333333;strokeColor=#b85450;" parent="external_layer" vertex="1">
          <mxGeometry x="525" y="30" width="150" height="40" as="geometry" />
        </mxCell>
        <mxCell id="third_party_apis" value="第三方API" style="ellipse;shape=cloud;whiteSpace=wrap;html=1;fillColor=#fff2cc;fontColor=#333333;strokeColor=#d6b656;" parent="external_layer" vertex="1">
          <mxGeometry x="800" y="30" width="150" height="40" as="geometry" />
        </mxCell>
        <mxCell id="user_to_frontend" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="user_layer" target="frontend_layer" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="600" y="400" as="sourcePoint" />
            <mxPoint x="650" y="350" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="frontend_to_gateway" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="frontend_layer" target="gateway_layer" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="600" y="426" as="sourcePoint" />
            <mxPoint x="650" y="376" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="gateway_to_backend" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="gateway_layer" target="backend_layer" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="600" y="526" as="sourcePoint" />
            <mxPoint x="650" y="476" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="backend_to_data" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="backend_layer" target="data_layer" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="600" y="676" as="sourcePoint" />
            <mxPoint x="650" y="626" as="targetPoint" />
          </mxGeometry>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="user_layer_detail" name="1. 用户层详细设计">
    <mxGraphModel dx="1422" dy="798" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1400" pageHeight="900" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <!-- 标题 -->
        <mxCell id="user_title" value="用户层详细设计" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=24;fontStyle=1;fontColor=#1f497d;" vertex="1" parent="1">
          <mxGeometry x="500" y="20" width="400" height="40" as="geometry" />
        </mxCell>
        <!-- 系统管理员 -->
        <mxCell id="admin_section" value="系统管理员" style="swimlane;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=16;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="50" y="80" width="300" height="180" as="geometry" />
        </mxCell>
        <mxCell id="admin_login" value="1. 登录系统" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="admin_section">
          <mxGeometry x="20" y="30" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="admin_user_mgmt" value="2. 用户管理" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="admin_section">
          <mxGeometry x="160" y="30" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="admin_role_mgmt" value="3. 角色权限管理" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="admin_section">
          <mxGeometry x="20" y="70" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="admin_system_config" value="4. 系统配置" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="admin_section">
          <mxGeometry x="160" y="70" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="admin_approval" value="5. 审批管理" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="admin_section">
          <mxGeometry x="20" y="110" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="admin_audit" value="6. 操作审计" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="admin_section">
          <mxGeometry x="160" y="110" width="120" height="30" as="geometry" />
        </mxCell>
        <!-- 项目经理 -->
        <mxCell id="pm_section" value="项目经理" style="swimlane;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=16;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="380" y="80" width="300" height="180" as="geometry" />
        </mxCell>
        <mxCell id="pm_login" value="1. 登录系统" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="pm_section">
          <mxGeometry x="20" y="30" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="pm_project_mgmt" value="2. 项目管理" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="pm_section">
          <mxGeometry x="160" y="30" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="pm_datasource_config" value="3. 数据源配置" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="pm_section">
          <mxGeometry x="20" y="70" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="pm_template_approve" value="4. 模板审批" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="pm_section">
          <mxGeometry x="160" y="70" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="pm_progress_monitor" value="5. 进度监控" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="pm_section">
          <mxGeometry x="20" y="110" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="pm_report_export" value="6. 报告导出" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="pm_section">
          <mxGeometry x="160" y="110" width="120" height="30" as="geometry" />
        </mxCell>
        <!-- 工程师 -->
        <mxCell id="engineer_section" value="工程师" style="swimlane;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=16;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="710" y="80" width="300" height="180" as="geometry" />
        </mxCell>
        <mxCell id="eng_login" value="1. 登录系统" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="engineer_section">
          <mxGeometry x="20" y="30" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="eng_plc_config" value="2. PLC配置" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="engineer_section">
          <mxGeometry x="160" y="30" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="eng_device_config" value="3. 设备配置" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="engineer_section">
          <mxGeometry x="20" y="70" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="eng_io_generation" value="4. IO点表生成" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="engineer_section">
          <mxGeometry x="160" y="70" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="eng_template_create" value="5. 模板创建" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="engineer_section">
          <mxGeometry x="20" y="110" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="eng_file_export" value="6. 文件导出" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="engineer_section">
          <mxGeometry x="160" y="110" width="120" height="30" as="geometry" />
        </mxCell>
        <!-- 只读用户 -->
        <mxCell id="viewer_section" value="只读用户" style="swimlane;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=16;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="1040" y="80" width="300" height="180" as="geometry" />
        </mxCell>
        <mxCell id="viewer_login" value="1. 登录系统" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0f0f0;strokeColor=#666666;" vertex="1" parent="viewer_section">
          <mxGeometry x="20" y="30" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="viewer_browse" value="2. 浏览配置" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0f0f0;strokeColor=#666666;" vertex="1" parent="viewer_section">
          <mxGeometry x="160" y="30" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="viewer_preview" value="3. 文件预览" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0f0f0;strokeColor=#666666;" vertex="1" parent="viewer_section">
          <mxGeometry x="20" y="70" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="viewer_download" value="4. 下载文件" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0f0f0;strokeColor=#666666;" vertex="1" parent="viewer_section">
          <mxGeometry x="160" y="70" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="viewer_search" value="5. 搜索查询" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0f0f0;strokeColor=#666666;" vertex="1" parent="viewer_section">
          <mxGeometry x="20" y="110" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="viewer_history" value="6. 历史记录" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0f0f0;strokeColor=#666666;" vertex="1" parent="viewer_section">
          <mxGeometry x="160" y="110" width="120" height="30" as="geometry" />
        </mxCell>
        <!-- 用户交互流程 -->
        <mxCell id="interaction_flow" value="用户交互流程" style="swimlane;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=16;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="50" y="300" width="1290" height="200" as="geometry" />
        </mxCell>
        <mxCell id="step1" value="1. 身份验证" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="interaction_flow">
          <mxGeometry x="50" y="40" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="step2" value="2. 权限检查" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="interaction_flow">
          <mxGeometry x="180" y="40" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="step3" value="3. 功能访问" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="interaction_flow">
          <mxGeometry x="310" y="40" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="step4" value="4. 数据操作" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="interaction_flow">
          <mxGeometry x="440" y="40" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="step5" value="5. 结果反馈" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="interaction_flow">
          <mxGeometry x="570" y="40" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="step6" value="6. 操作记录" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="interaction_flow">
          <mxGeometry x="700" y="40" width="100" height="40" as="geometry" />
        </mxCell>
        <!-- 详细步骤说明 -->
        <mxCell id="auth_detail" value="• 用户名/密码验证&#xa;• 手机验证码&#xa;• JWT Token生成" style="rounded=1;whiteSpace=wrap;html=1;align=left;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="interaction_flow">
          <mxGeometry x="30" y="100" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="permission_detail" value="• 角色权限验证&#xa;• 功能模块访问控制&#xa;• 数据范围权限" style="rounded=1;whiteSpace=wrap;html=1;align=left;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="interaction_flow">
          <mxGeometry x="180" y="100" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="function_detail" value="• 界面渲染&#xa;• 功能菜单显示&#xa;• 操作按钮控制" style="rounded=1;whiteSpace=wrap;html=1;align=left;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="interaction_flow">
          <mxGeometry x="330" y="100" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="data_detail" value="• CRUD操作&#xa;• 文件上传下载&#xa;• 批量处理" style="rounded=1;whiteSpace=wrap;html=1;align=left;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="interaction_flow">
          <mxGeometry x="480" y="100" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="feedback_detail" value="• 操作结果提示&#xa;• 错误信息显示&#xa;• 进度状态更新" style="rounded=1;whiteSpace=wrap;html=1;align=left;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="interaction_flow">
          <mxGeometry x="630" y="100" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="log_detail" value="• 操作日志记录&#xa;• 审计跟踪&#xa;• 异常监控" style="rounded=1;whiteSpace=wrap;html=1;align=left;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="interaction_flow">
          <mxGeometry x="780" y="100" width="140" height="60" as="geometry" />
        </mxCell>
        <!-- 连接线 -->
        <mxCell id="flow_arrow1" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="interaction_flow" source="step1" target="step2">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="200" y="120" as="sourcePoint" />
            <mxPoint x="250" y="70" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="flow_arrow2" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="interaction_flow" source="step2" target="step3">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="200" y="120" as="sourcePoint" />
            <mxPoint x="250" y="70" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="flow_arrow3" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="interaction_flow" source="step3" target="step4">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="200" y="120" as="sourcePoint" />
            <mxPoint x="250" y="70" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="flow_arrow4" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="interaction_flow" source="step4" target="step5">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="200" y="120" as="sourcePoint" />
            <mxPoint x="250" y="70" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="flow_arrow5" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="interaction_flow" source="step5" target="step6">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="200" y="120" as="sourcePoint" />
            <mxPoint x="250" y="70" as="targetPoint" />
          </mxGeometry>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="frontend_layer_detail" name="2. 前端层详细设计">
    <mxGraphModel dx="1415" dy="818" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1400" pageHeight="900" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="frontend_title" value="前端层详细设计 (Angular + Ng-Zorro)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=24;fontStyle=1;fontColor=#1f497d;" parent="1" vertex="1">
          <mxGeometry x="400" y="20" width="600" height="40" as="geometry" />
        </mxCell>
        <mxCell id="login_auth_module" value="登录认证模块" style="swimlane;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=16;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="50" y="80" width="400" height="200" as="geometry" />
        </mxCell>
        <mxCell id="login_form" value="1. 登录表单组件" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="login_auth_module" vertex="1">
          <mxGeometry x="20" y="30" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="auth_guard" value="2. 路由守卫" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="login_auth_module" vertex="1">
          <mxGeometry x="200" y="30" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="token_service" value="3. Token管理服务" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="login_auth_module" vertex="1">
          <mxGeometry x="20" y="70" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="user_service" value="4. 用户状态服务" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="login_auth_module" vertex="1">
          <mxGeometry x="200" y="70" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="permission_directive" value="5. 权限指令" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="login_auth_module" vertex="1">
          <mxGeometry x="20" y="110" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="interceptor" value="6. HTTP拦截器" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="login_auth_module" vertex="1">
          <mxGeometry x="200" y="110" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="datasource_module_detail" value="数据源选择模块" style="swimlane;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=16;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="480" y="80" width="400" height="200" as="geometry" />
        </mxCell>
        <mxCell id="datasource_selector" value="1. 数据源选择器" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="datasource_module_detail" vertex="1">
          <mxGeometry x="20" y="30" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="jiandaoyun_config" value="2. 简道云配置" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="datasource_module_detail" vertex="1">
          <mxGeometry x="200" y="30" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ai_config" value="3. AI服务配置" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="datasource_module_detail" vertex="1">
          <mxGeometry x="20" y="70" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="api_config" value="4. 第三方API配置" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="datasource_module_detail" vertex="1">
          <mxGeometry x="200" y="70" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="connection_test" value="5. 连接测试" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="datasource_module_detail" vertex="1">
          <mxGeometry x="20" y="110" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="data_preview" value="6. 数据预览" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="datasource_module_detail" vertex="1">
          <mxGeometry x="200" y="110" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="plc_config_module_detail" value="PLC配置模块" style="swimlane;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=16;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="910" y="80" width="400" height="200" as="geometry" />
        </mxCell>
        <mxCell id="plc_rack_designer" value="1. 机架设计器" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="plc_config_module_detail" vertex="1">
          <mxGeometry x="20" y="30" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="drag_drop_interface" value="2. 拖拽界面" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="plc_config_module_detail" vertex="1">
          <mxGeometry x="200" y="30" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="module_library" value="3. 模块库" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="plc_config_module_detail" vertex="1">
          <mxGeometry x="20" y="70" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="config_validator" value="4. 配置验证器" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="plc_config_module_detail" vertex="1">
          <mxGeometry x="200" y="70" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="rack_visualizer" value="5. 机架可视化" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="plc_config_module_detail" vertex="1">
          <mxGeometry x="20" y="110" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="config_export" value="6. 配置导出" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="plc_config_module_detail" vertex="1">
          <mxGeometry x="200" y="110" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="device_config_module_detail" value="第三方设备模块" style="swimlane;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=16;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="50" y="300" width="400" height="200" as="geometry" />
        </mxCell>
        <mxCell id="device_template_mgmt" value="1. 设备模板管理" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="device_config_module_detail" vertex="1">
          <mxGeometry x="28" y="31" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="template_editor" value="2. 模板编辑器" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="device_config_module_detail" vertex="1">
          <mxGeometry x="208" y="31" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="approval_workflow" value="3. 审批流程" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="device_config_module_detail" vertex="1">
          <mxGeometry x="28" y="71" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="template_library" value="4. 模板库" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="device_config_module_detail" vertex="1">
          <mxGeometry x="208" y="71" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="device_instance" value="5. 设备实例化" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="device_config_module_detail" vertex="1">
          <mxGeometry x="28" y="111" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="parameter_config" value="6. 参数配置" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="device_config_module_detail" vertex="1">
          <mxGeometry x="208" y="111" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="io_generation_module_detail" value="IO点表生成模块" style="swimlane;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=16;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="480" y="300" width="400" height="200" as="geometry" />
        </mxCell>
        <mxCell id="io_table_generator" value="1. IO表生成器" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="io_generation_module_detail" vertex="1">
          <mxGeometry x="20" y="30" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="format_selector" value="2. 格式选择器" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="io_generation_module_detail" vertex="1">
          <mxGeometry x="200" y="30" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="template_engine" value="3. 模板引擎" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="io_generation_module_detail" vertex="1">
          <mxGeometry x="20" y="70" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="batch_processor" value="4. 批量处理器" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="io_generation_module_detail" vertex="1">
          <mxGeometry x="200" y="70" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="progress_monitor" value="5. 进度监控" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="io_generation_module_detail" vertex="1">
          <mxGeometry x="20" y="110" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="result_validator" value="6. 结果验证" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="io_generation_module_detail" vertex="1">
          <mxGeometry x="200" y="110" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="file_preview_module_detail" value="文件预览模块" style="swimlane;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=16;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="910" y="300" width="400" height="200" as="geometry" />
        </mxCell>
        <mxCell id="file_viewer" value="1. 文件查看器" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="file_preview_module_detail" vertex="1">
          <mxGeometry x="20" y="30" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="excel_preview" value="2. Excel预览" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="file_preview_module_detail" vertex="1">
          <mxGeometry x="200" y="30" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="pdf_preview" value="3. PDF预览" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="file_preview_module_detail" vertex="1">
          <mxGeometry x="20" y="70" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="image_preview" value="4. 图片预览" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="file_preview_module_detail" vertex="1">
          <mxGeometry x="200" y="70" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="download_manager" value="5. 下载管理" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="file_preview_module_detail" vertex="1">
          <mxGeometry x="20" y="110" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="version_control" value="6. 版本控制" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="file_preview_module_detail" vertex="1">
          <mxGeometry x="200" y="110" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="state_management_detail" value="状态管理 (NgRx)" style="swimlane;whiteSpace=wrap;html=1;fillColor=#f0f0f0;strokeColor=#666666;fontSize=16;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="50" y="520" width="1260" height="240" as="geometry" />
        </mxCell>
        <mxCell id="store_config" value="1. Store配置" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="state_management_detail" vertex="1">
          <mxGeometry x="195" y="40" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="actions" value="2. Actions定义" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="state_management_detail" vertex="1">
          <mxGeometry x="345" y="40" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="reducers" value="3. Reducers" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="state_management_detail" vertex="1">
          <mxGeometry x="495" y="40" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="effects" value="4. Effects处理" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="state_management_detail" vertex="1">
          <mxGeometry x="645" y="40" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="selectors" value="5. Selectors" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="state_management_detail" vertex="1">
          <mxGeometry x="795" y="40" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="dev_tools" value="6. DevTools集成" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="state_management_detail" vertex="1">
          <mxGeometry x="945" y="40" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="implementation_steps" value="• 用户状态管理&#xa;• 数据缓存策略&#xa;• 异步操作处理&#xa;• 错误状态管理&#xa;• 加载状态控制" style="rounded=1;whiteSpace=wrap;html=1;align=center;fillColor=#f0f0f0;strokeColor=#666666;" parent="state_management_detail" vertex="1">
          <mxGeometry x="542.5" y="90" width="175" height="120" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="gateway_layer_detail" name="3. API网关层详细设计">
    <mxGraphModel dx="1417" dy="819" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1400" pageHeight="900" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="gateway_title" value="API网关层详细设计 (Rust Axum)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=24;fontStyle=1;fontColor=#1f497d;" parent="1" vertex="1">
          <mxGeometry x="400" y="20" width="600" height="40" as="geometry" />
        </mxCell>
        <mxCell id="jwt_auth_middleware" value="JWT认证中间件" style="swimlane;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=16;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="50" y="80" width="400" height="200" as="geometry" />
        </mxCell>
        <mxCell id="token_validation" value="1. Token验证" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="jwt_auth_middleware" vertex="1">
          <mxGeometry x="20" y="30" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="token_refresh" value="2. Token刷新" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="jwt_auth_middleware" vertex="1">
          <mxGeometry x="200" y="30" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="user_extraction" value="3. 用户信息提取" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="jwt_auth_middleware" vertex="1">
          <mxGeometry x="20" y="70" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="permission_check" value="4. 权限检查" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="jwt_auth_middleware" vertex="1">
          <mxGeometry x="200" y="70" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="blacklist_check" value="5. 黑名单检查" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="jwt_auth_middleware" vertex="1">
          <mxGeometry x="20" y="110" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="rate_limiting" value="6. 频率限制" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="jwt_auth_middleware" vertex="1">
          <mxGeometry x="200" y="110" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="cors_middleware_detail" value="CORS处理中间件" style="swimlane;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=16;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="480" y="80" width="400" height="200" as="geometry" />
        </mxCell>
        <mxCell id="origin_validation" value="1. 来源验证" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="cors_middleware_detail" vertex="1">
          <mxGeometry x="20" y="30" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="preflight_handling" value="2. 预检请求处理" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="cors_middleware_detail" vertex="1">
          <mxGeometry x="200" y="30" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="headers_config" value="3. 响应头配置" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="cors_middleware_detail" vertex="1">
          <mxGeometry x="20" y="70" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="methods_config" value="4. 允许方法配置" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="cors_middleware_detail" vertex="1">
          <mxGeometry x="200" y="70" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="credentials_handling" value="5. 凭证处理" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="cors_middleware_detail" vertex="1">
          <mxGeometry x="20" y="110" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="cache_control" value="6. 缓存控制" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="cors_middleware_detail" vertex="1">
          <mxGeometry x="200" y="110" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="api_router_detail" value="API路由管理" style="swimlane;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=16;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="910" y="80" width="400" height="200" as="geometry" />
        </mxCell>
        <mxCell id="route_definition" value="1. 路由定义" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="api_router_detail" vertex="1">
          <mxGeometry x="20" y="30" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="path_matching" value="2. 路径匹配" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="api_router_detail" vertex="1">
          <mxGeometry x="200" y="30" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="handler_mapping" value="3. 处理器映射" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="api_router_detail" vertex="1">
          <mxGeometry x="20" y="70" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="middleware_chain" value="4. 中间件链" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="api_router_detail" vertex="1">
          <mxGeometry x="200" y="70" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="version_control" value="5. 版本控制" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="api_router_detail" vertex="1">
          <mxGeometry x="20" y="110" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="load_balancing" value="6. 负载均衡" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="api_router_detail" vertex="1">
          <mxGeometry x="200" y="110" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="file_upload_detail" value="文件上传处理" style="swimlane;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=16;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="50" y="300" width="400" height="200" as="geometry" />
        </mxCell>
        <mxCell id="multipart_parser" value="1. 多部分解析器" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="file_upload_detail" vertex="1">
          <mxGeometry x="20" y="30" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="file_validation" value="2. 文件验证" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="file_upload_detail" vertex="1">
          <mxGeometry x="200" y="30" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="size_limit" value="3. 大小限制" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="file_upload_detail" vertex="1">
          <mxGeometry x="20" y="70" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="virus_scan" value="4. 病毒扫描" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="file_upload_detail" vertex="1">
          <mxGeometry x="200" y="70" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="temp_storage" value="5. 临时存储" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="file_upload_detail" vertex="1">
          <mxGeometry x="20" y="110" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="progress_tracking" value="6. 进度跟踪" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="file_upload_detail" vertex="1">
          <mxGeometry x="200" y="110" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="error_handler_detail" value="错误处理中间件" style="swimlane;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=16;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="480" y="300" width="400" height="200" as="geometry" />
        </mxCell>
        <mxCell id="error_catching" value="1. 错误捕获" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="error_handler_detail" vertex="1">
          <mxGeometry x="20" y="30" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="error_classification" value="2. 错误分类" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="error_handler_detail" vertex="1">
          <mxGeometry x="200" y="30" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="response_formatting" value="3. 响应格式化" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="error_handler_detail" vertex="1">
          <mxGeometry x="20" y="70" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="stack_trace" value="4. 堆栈跟踪" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="error_handler_detail" vertex="1">
          <mxGeometry x="200" y="70" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="error_logging" value="5. 错误日志" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="error_handler_detail" vertex="1">
          <mxGeometry x="20" y="110" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="alert_notification" value="6. 告警通知" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="error_handler_detail" vertex="1">
          <mxGeometry x="200" y="110" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="request_logger_detail" value="请求日志中间件" style="swimlane;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=16;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="910" y="300" width="400" height="200" as="geometry" />
        </mxCell>
        <mxCell id="request_capture" value="1. 请求捕获" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="request_logger_detail" vertex="1">
          <mxGeometry x="20" y="30" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="response_capture" value="2. 响应捕获" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="request_logger_detail" vertex="1">
          <mxGeometry x="200" y="30" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="timing_measurement" value="3. 时间测量" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="request_logger_detail" vertex="1">
          <mxGeometry x="20" y="70" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="structured_logging" value="4. 结构化日志" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="request_logger_detail" vertex="1">
          <mxGeometry x="200" y="70" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="log_filtering" value="5. 日志过滤" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="request_logger_detail" vertex="1">
          <mxGeometry x="20" y="110" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="log_rotation" value="6. 日志轮转" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="request_logger_detail" vertex="1">
          <mxGeometry x="200" y="110" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="gateway_implementation" value="网关实现步骤" style="swimlane;whiteSpace=wrap;html=1;fillColor=#f0f0f0;strokeColor=#666666;fontSize=16;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="50" y="520" width="1260" height="230" as="geometry" />
        </mxCell>
        <mxCell id="step1_setup" value="1. 项目初始化" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="gateway_implementation" vertex="1">
          <mxGeometry x="130" y="30" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="step2_middleware" value="2. 中间件开发" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="gateway_implementation" vertex="1">
          <mxGeometry x="300" y="30" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="step3_routing" value="3. 路由配置" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="gateway_implementation" vertex="1">
          <mxGeometry x="470" y="30" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="step4_handlers" value="4. 处理器实现" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="gateway_implementation" vertex="1">
          <mxGeometry x="640" y="30" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="step5_testing" value="5. 测试验证" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="gateway_implementation" vertex="1">
          <mxGeometry x="810" y="30" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="step6_deployment" value="6. 部署配置" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="gateway_implementation" vertex="1">
          <mxGeometry x="980" y="30" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="impl_details" value="实现细节：&#xa;• Cargo.toml依赖配置 (axum, tokio, tower, serde)&#xa;• 中间件层级结构设计&#xa;• 异步处理和错误传播&#xa;• 配置文件管理 (TOML/YAML)&#xa;• 监控指标集成 (Prometheus)&#xa;• 容器化部署 (Docker)" style="rounded=1;whiteSpace=wrap;html=1;align=left;fillColor=#f0f0f0;strokeColor=#666666;" parent="gateway_implementation" vertex="1">
          <mxGeometry x="130" y="80" width="1000" height="120" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="backend_layer_detail" name="4. 后端服务层详细设计">
    <mxGraphModel dx="1415" dy="818" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1400" pageHeight="900" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="backend_title" value="后端服务层详细设计 (Rust + Python)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=24;fontStyle=1;fontColor=#1f497d;" parent="1" vertex="1">
          <mxGeometry x="400" y="20" width="600" height="40" as="geometry" />
        </mxCell>
        <mxCell id="rust_core_services" value="Rust核心服务" style="swimlane;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=16;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="50" y="80" width="600" height="300" as="geometry" />
        </mxCell>
        <mxCell id="auth_service_detail" value="用户认证服务" style="swimlane;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="rust_core_services" vertex="1">
          <mxGeometry x="20" y="30" width="270" height="120" as="geometry" />
        </mxCell>
        <mxCell id="user_registration" value="1. 用户注册" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="auth_service_detail" vertex="1">
          <mxGeometry x="10" y="25" width="100" height="25" as="geometry" />
        </mxCell>
        <mxCell id="login_validation" value="2. 登录验证" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="auth_service_detail" vertex="1">
          <mxGeometry x="130" y="25" width="100" height="25" as="geometry" />
        </mxCell>
        <mxCell id="password_mgmt" value="3. 密码管理" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="auth_service_detail" vertex="1">
          <mxGeometry x="10" y="60" width="100" height="25" as="geometry" />
        </mxCell>
        <mxCell id="session_mgmt" value="4. 会话管理" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="auth_service_detail" vertex="1">
          <mxGeometry x="130" y="60" width="100" height="25" as="geometry" />
        </mxCell>
        <mxCell id="datasource_service_detail" value="数据源管理服务" style="swimlane;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="rust_core_services" vertex="1">
          <mxGeometry x="310" y="30" width="270" height="120" as="geometry" />
        </mxCell>
        <mxCell id="source_config" value="1. 数据源配置" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="datasource_service_detail" vertex="1">
          <mxGeometry x="10" y="25" width="100" height="25" as="geometry" />
        </mxCell>
        <mxCell id="connection_pool" value="2. 连接池管理" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="datasource_service_detail" vertex="1">
          <mxGeometry x="130" y="25" width="100" height="25" as="geometry" />
        </mxCell>
        <mxCell id="data_sync" value="3. 数据同步" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="datasource_service_detail" vertex="1">
          <mxGeometry x="10" y="60" width="100" height="25" as="geometry" />
        </mxCell>
        <mxCell id="cache_strategy" value="4. 缓存策略" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="datasource_service_detail" vertex="1">
          <mxGeometry x="130" y="60" width="100" height="25" as="geometry" />
        </mxCell>
        <mxCell id="plc_service_detail" value="PLC配置服务" style="swimlane;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="rust_core_services" vertex="1">
          <mxGeometry x="20" y="160" width="270" height="120" as="geometry" />
        </mxCell>
        <mxCell id="rack_config" value="1. 机架配置" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="plc_service_detail" vertex="1">
          <mxGeometry x="10" y="25" width="100" height="25" as="geometry" />
        </mxCell>
        <mxCell id="module_mgmt" value="2. 模块管理" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="plc_service_detail" vertex="1">
          <mxGeometry x="130" y="25" width="100" height="25" as="geometry" />
        </mxCell>
        <mxCell id="io_mapping" value="3. IO映射" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="plc_service_detail" vertex="1">
          <mxGeometry x="10" y="60" width="100" height="25" as="geometry" />
        </mxCell>
        <mxCell id="config_validation" value="4. 配置验证" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="plc_service_detail" vertex="1">
          <mxGeometry x="130" y="60" width="100" height="25" as="geometry" />
        </mxCell>
        <mxCell id="device_template_service_detail" value="设备模板服务" style="swimlane;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="rust_core_services" vertex="1">
          <mxGeometry x="310" y="160" width="270" height="120" as="geometry" />
        </mxCell>
        <mxCell id="template_crud" value="1. 模板CRUD" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="device_template_service_detail" vertex="1">
          <mxGeometry x="10" y="25" width="100" height="25" as="geometry" />
        </mxCell>
        <mxCell id="template_versioning" value="2. 版本控制" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="device_template_service_detail" vertex="1">
          <mxGeometry x="130" y="25" width="100" height="25" as="geometry" />
        </mxCell>
        <mxCell id="approval_process" value="3. 审批流程" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="device_template_service_detail" vertex="1">
          <mxGeometry x="10" y="60" width="100" height="25" as="geometry" />
        </mxCell>
        <mxCell id="template_sharing" value="4. 模板共享" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="device_template_service_detail" vertex="1">
          <mxGeometry x="130" y="60" width="100" height="25" as="geometry" />
        </mxCell>
        <mxCell id="python_file_services" value="Python文件处理服务" style="swimlane;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=16;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="680" y="80" width="600" height="300" as="geometry" />
        </mxCell>
        <mxCell id="xls_processor_detail" value="XLS文件处理" style="swimlane;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="python_file_services" vertex="1">
          <mxGeometry x="20" y="30" width="270" height="120" as="geometry" />
        </mxCell>
        <mxCell id="excel_reader" value="1. Excel读取" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="xls_processor_detail" vertex="1">
          <mxGeometry x="10" y="25" width="100" height="25" as="geometry" />
        </mxCell>
        <mxCell id="data_parser" value="2. 数据解析" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="xls_processor_detail" vertex="1">
          <mxGeometry x="130" y="25" width="100" height="25" as="geometry" />
        </mxCell>
        <mxCell id="format_converter" value="3. 格式转换" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="xls_processor_detail" vertex="1">
          <mxGeometry x="10" y="60" width="100" height="25" as="geometry" />
        </mxCell>
        <mxCell id="excel_writer" value="4. Excel写入" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="xls_processor_detail" vertex="1">
          <mxGeometry x="130" y="60" width="100" height="25" as="geometry" />
        </mxCell>
        <mxCell id="ai_parser_detail" value="AI文档解析" style="swimlane;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="python_file_services" vertex="1">
          <mxGeometry x="310" y="30" width="270" height="120" as="geometry" />
        </mxCell>
        <mxCell id="ocr_processing" value="1. OCR处理" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="ai_parser_detail" vertex="1">
          <mxGeometry x="10" y="25" width="100" height="25" as="geometry" />
        </mxCell>
        <mxCell id="nlp_extraction" value="2. NLP提取" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="ai_parser_detail" vertex="1">
          <mxGeometry x="130" y="25" width="100" height="25" as="geometry" />
        </mxCell>
        <mxCell id="pattern_recognition" value="3. 模式识别" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="ai_parser_detail" vertex="1">
          <mxGeometry x="10" y="60" width="100" height="25" as="geometry" />
        </mxCell>
        <mxCell id="data_structuring" value="4. 数据结构化" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="ai_parser_detail" vertex="1">
          <mxGeometry x="130" y="60" width="100" height="25" as="geometry" />
        </mxCell>
        <mxCell id="io_generator_detail" value="IO点表生成" style="swimlane;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="python_file_services" vertex="1">
          <mxGeometry x="20" y="160" width="270" height="120" as="geometry" />
        </mxCell>
        <mxCell id="template_processing" value="1. 模板处理" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="io_generator_detail" vertex="1">
          <mxGeometry x="10" y="25" width="100" height="25" as="geometry" />
        </mxCell>
        <mxCell id="data_mapping" value="2. 数据映射" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="io_generator_detail" vertex="1">
          <mxGeometry x="130" y="25" width="100" height="25" as="geometry" />
        </mxCell>
        <mxCell id="table_generation" value="3. 表格生成" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="io_generator_detail" vertex="1">
          <mxGeometry x="10" y="60" width="100" height="25" as="geometry" />
        </mxCell>
        <mxCell id="quality_check" value="4. 质量检查" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="io_generator_detail" vertex="1">
          <mxGeometry x="130" y="60" width="100" height="25" as="geometry" />
        </mxCell>
        <mxCell id="export_service_detail" value="多格式导出" style="swimlane;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="python_file_services" vertex="1">
          <mxGeometry x="310" y="160" width="270" height="120" as="geometry" />
        </mxCell>
        <mxCell id="hmi_export" value="1. HMI格式" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="export_service_detail" vertex="1">
          <mxGeometry x="10" y="25" width="100" height="25" as="geometry" />
        </mxCell>
        <mxCell id="plc_export" value="2. PLC格式" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="export_service_detail" vertex="1">
          <mxGeometry x="130" y="25" width="100" height="25" as="geometry" />
        </mxCell>
        <mxCell id="csv_export" value="3. CSV导出" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="export_service_detail" vertex="1">
          <mxGeometry x="10" y="60" width="100" height="25" as="geometry" />
        </mxCell>
        <mxCell id="custom_format" value="4. 自定义格式" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="export_service_detail" vertex="1">
          <mxGeometry x="130" y="60" width="100" height="25" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="data_layer_detail" name="5. 数据层详细设计">
    <mxGraphModel dx="1415" dy="818" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1400" pageHeight="900" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="data_title" value="数据层详细设计" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=24;fontStyle=1;fontColor=#1f497d;" parent="1" vertex="1">
          <mxGeometry x="500" y="20" width="400" height="40" as="geometry" />
        </mxCell>
        <mxCell id="postgresql_detail" value="PostgreSQL数据库" style="swimlane;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=16;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="50" y="80" width="600" height="250" as="geometry" />
        </mxCell>
        <mxCell id="user_tables" value="用户管理表" style="swimlane;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="postgresql_detail" vertex="1">
          <mxGeometry x="20" y="30" width="270" height="100" as="geometry" />
        </mxCell>
        <mxCell id="users_table" value="users - 用户表" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="user_tables" vertex="1">
          <mxGeometry x="10" y="25" width="120" height="25" as="geometry" />
        </mxCell>
        <mxCell id="roles_table" value="roles - 角色表" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="user_tables" vertex="1">
          <mxGeometry x="140" y="25" width="120" height="25" as="geometry" />
        </mxCell>
        <mxCell id="permissions_table" value="permissions - 权限表" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="user_tables" vertex="1">
          <mxGeometry x="10" y="60" width="120" height="25" as="geometry" />
        </mxCell>
        <mxCell id="user_sessions" value="user_sessions - 会话" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="user_tables" vertex="1">
          <mxGeometry x="140" y="60" width="120" height="25" as="geometry" />
        </mxCell>
        <mxCell id="config_tables" value="配置管理表" style="swimlane;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="postgresql_detail" vertex="1">
          <mxGeometry x="310" y="30" width="270" height="100" as="geometry" />
        </mxCell>
        <mxCell id="plc_configs" value="plc_configs - PLC配置" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="config_tables" vertex="1">
          <mxGeometry x="10" y="25" width="120" height="25" as="geometry" />
        </mxCell>
        <mxCell id="device_templates" value="device_templates - 设备模板" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="config_tables" vertex="1">
          <mxGeometry x="140" y="25" width="120" height="25" as="geometry" />
        </mxCell>
        <mxCell id="datasources" value="datasources - 数据源" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="config_tables" vertex="1">
          <mxGeometry x="10" y="60" width="120" height="25" as="geometry" />
        </mxCell>
        <mxCell id="io_mappings" value="io_mappings - IO映射" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="config_tables" vertex="1">
          <mxGeometry x="140" y="60" width="120" height="25" as="geometry" />
        </mxCell>
        <mxCell id="business_tables" value="业务数据表" style="swimlane;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="postgresql_detail" vertex="1">
          <mxGeometry x="20" y="140" width="270" height="100" as="geometry" />
        </mxCell>
        <mxCell id="projects" value="projects - 项目表" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="business_tables" vertex="1">
          <mxGeometry x="10" y="25" width="120" height="25" as="geometry" />
        </mxCell>
        <mxCell id="io_tables" value="io_tables - IO点表" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="business_tables" vertex="1">
          <mxGeometry x="140" y="25" width="120" height="25" as="geometry" />
        </mxCell>
        <mxCell id="approvals" value="approvals - 审批记录" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="business_tables" vertex="1">
          <mxGeometry x="10" y="60" width="120" height="25" as="geometry" />
        </mxCell>
        <mxCell id="audit_logs" value="audit_logs - 审计日志" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="business_tables" vertex="1">
          <mxGeometry x="140" y="60" width="120" height="25" as="geometry" />
        </mxCell>
        <mxCell id="system_tables" value="系统表" style="swimlane;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="postgresql_detail" vertex="1">
          <mxGeometry x="310" y="140" width="270" height="100" as="geometry" />
        </mxCell>
        <mxCell id="system_configs" value="system_configs - 系统配置" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="system_tables" vertex="1">
          <mxGeometry x="10" y="25" width="120" height="25" as="geometry" />
        </mxCell>
        <mxCell id="file_metadata" value="file_metadata - 文件元数据" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="system_tables" vertex="1">
          <mxGeometry x="140" y="25" width="120" height="25" as="geometry" />
        </mxCell>
        <mxCell id="job_queue" value="job_queue - 任务队列" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="system_tables" vertex="1">
          <mxGeometry x="10" y="60" width="120" height="25" as="geometry" />
        </mxCell>
        <mxCell id="notifications" value="notifications - 通知" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="system_tables" vertex="1">
          <mxGeometry x="140" y="60" width="120" height="25" as="geometry" />
        </mxCell>
        <mxCell id="redis_detail" value="Redis缓存" style="swimlane;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=16;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="680" y="80" width="600" height="250" as="geometry" />
        </mxCell>
        <mxCell id="session_cache" value="会话缓存" style="swimlane;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="redis_detail" vertex="1">
          <mxGeometry x="20" y="30" width="270" height="100" as="geometry" />
        </mxCell>
        <mxCell id="jwt_tokens" value="JWT Tokens" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="session_cache" vertex="1">
          <mxGeometry x="10" y="25" width="120" height="25" as="geometry" />
        </mxCell>
        <mxCell id="user_sessions_cache" value="用户会话" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="session_cache" vertex="1">
          <mxGeometry x="140" y="25" width="120" height="25" as="geometry" />
        </mxCell>
        <mxCell id="login_attempts" value="登录尝试" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="session_cache" vertex="1">
          <mxGeometry x="10" y="60" width="120" height="25" as="geometry" />
        </mxCell>
        <mxCell id="rate_limits" value="频率限制" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="session_cache" vertex="1">
          <mxGeometry x="140" y="60" width="120" height="25" as="geometry" />
        </mxCell>
        <mxCell id="data_cache" value="数据缓存" style="swimlane;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="redis_detail" vertex="1">
          <mxGeometry x="310" y="30" width="270" height="100" as="geometry" />
        </mxCell>
        <mxCell id="config_cache" value="配置缓存" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="data_cache" vertex="1">
          <mxGeometry x="10" y="25" width="120" height="25" as="geometry" />
        </mxCell>
        <mxCell id="template_cache" value="模板缓存" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="data_cache" vertex="1">
          <mxGeometry x="140" y="25" width="120" height="25" as="geometry" />
        </mxCell>
        <mxCell id="api_response_cache" value="API响应缓存" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="data_cache" vertex="1">
          <mxGeometry x="10" y="60" width="120" height="25" as="geometry" />
        </mxCell>
        <mxCell id="file_processing_cache" value="文件处理缓存" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="data_cache" vertex="1">
          <mxGeometry x="140" y="60" width="120" height="25" as="geometry" />
        </mxCell>
        <mxCell id="task_queue" value="任务队列" style="swimlane;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="redis_detail" vertex="1">
          <mxGeometry x="20" y="140" width="270" height="100" as="geometry" />
        </mxCell>
        <mxCell id="file_processing_queue" value="文件处理队列" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="task_queue" vertex="1">
          <mxGeometry x="10" y="25" width="120" height="25" as="geometry" />
        </mxCell>
        <mxCell id="io_generation_queue" value="IO生成队列" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="task_queue" vertex="1">
          <mxGeometry x="140" y="25" width="120" height="25" as="geometry" />
        </mxCell>
        <mxCell id="notification_queue" value="通知队列" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="task_queue" vertex="1">
          <mxGeometry x="10" y="60" width="120" height="25" as="geometry" />
        </mxCell>
        <mxCell id="backup_queue" value="备份队列" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="task_queue" vertex="1">
          <mxGeometry x="140" y="60" width="120" height="25" as="geometry" />
        </mxCell>
        <mxCell id="realtime_data" value="实时数据" style="swimlane;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="redis_detail" vertex="1">
          <mxGeometry x="310" y="140" width="270" height="100" as="geometry" />
        </mxCell>
        <mxCell id="online_users" value="在线用户" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="realtime_data" vertex="1">
          <mxGeometry x="10" y="25" width="120" height="25" as="geometry" />
        </mxCell>
        <mxCell id="system_status" value="系统状态" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="realtime_data" vertex="1">
          <mxGeometry x="140" y="25" width="120" height="25" as="geometry" />
        </mxCell>
        <mxCell id="processing_progress" value="处理进度" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="realtime_data" vertex="1">
          <mxGeometry x="10" y="60" width="120" height="25" as="geometry" />
        </mxCell>
        <mxCell id="websocket_connections" value="WebSocket连接" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="realtime_data" vertex="1">
          <mxGeometry x="140" y="60" width="120" height="25" as="geometry" />
        </mxCell>
        <mxCell id="file_storage_detail" value="文件存储系统" style="swimlane;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=16;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="50" y="350" width="600" height="270" as="geometry" />
        </mxCell>
        <mxCell id="upload_files" value="上传文件" style="swimlane;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="file_storage_detail" vertex="1">
          <mxGeometry x="20" y="50" width="270" height="80" as="geometry" />
        </mxCell>
        <mxCell id="excel_files" value="Excel文件" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="upload_files" vertex="1">
          <mxGeometry x="10" y="37" width="100" height="25" as="geometry" />
        </mxCell>
        <mxCell id="pdf_files" value="PDF文档" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="upload_files" vertex="1">
          <mxGeometry x="130" y="37" width="100" height="25" as="geometry" />
        </mxCell>
        <mxCell id="generated_files" value="生成文件" style="swimlane;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="file_storage_detail" vertex="1">
          <mxGeometry x="310" y="50" width="270" height="80" as="geometry" />
        </mxCell>
        <mxCell id="io_tables_files" value="IO点表文件" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="generated_files" vertex="1">
          <mxGeometry x="10" y="37" width="100" height="25" as="geometry" />
        </mxCell>
        <mxCell id="config_exports" value="配置导出文件" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="generated_files" vertex="1">
          <mxGeometry x="130" y="37" width="100" height="25" as="geometry" />
        </mxCell>
        <mxCell id="data_management" value="数据管理策略" style="swimlane;whiteSpace=wrap;html=1;fillColor=#f0f0f0;strokeColor=#666666;fontSize=16;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="680" y="350" width="600" height="270" as="geometry" />
        </mxCell>
        <mxCell id="backup_strategy" value="1. 备份策略" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="data_management" vertex="1">
          <mxGeometry x="50" y="30" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="recovery_plan" value="2. 恢复计划" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="data_management" vertex="1">
          <mxGeometry x="200" y="30" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="data_archiving" value="3. 数据归档" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="data_management" vertex="1">
          <mxGeometry x="350" y="30" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="performance_tuning" value="4. 性能调优" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="data_management" vertex="1">
          <mxGeometry x="50" y="80" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="monitoring" value="5. 监控告警" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="data_management" vertex="1">
          <mxGeometry x="200" y="80" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="security_measures" value="6. 安全措施" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="data_management" vertex="1">
          <mxGeometry x="350" y="80" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="implementation_details" value="实施细节：&#xa;• PostgreSQL主从复制配置&#xa;• Redis集群部署&#xa;• 定期数据备份和恢复测试&#xa;• 数据库连接池优化&#xa;• 索引策略和查询优化&#xa;• 数据加密和访问控制" style="rounded=1;whiteSpace=wrap;html=1;align=left;fillColor=#f0f0f0;strokeColor=#666666;" parent="data_management" vertex="1">
          <mxGeometry x="50" y="130" width="420" height="120" as="geometry" />
        </mxCell>
        <mxCell id="storage_strategy" value="存储策略" style="swimlane;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="70" y="516" width="560" height="70" as="geometry" />
        </mxCell>
        <mxCell id="local_storage" value="本地存储" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="storage_strategy" vertex="1">
          <mxGeometry x="20" y="25" width="100" height="25" as="geometry" />
        </mxCell>
        <mxCell id="cloud_storage" value="云存储" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="storage_strategy" vertex="1">
          <mxGeometry x="140" y="25" width="100" height="25" as="geometry" />
        </mxCell>
        <mxCell id="backup_storage" value="备份存储" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="storage_strategy" vertex="1">
          <mxGeometry x="260" y="25" width="100" height="25" as="geometry" />
        </mxCell>
        <mxCell id="archive_storage" value="归档存储" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="storage_strategy" vertex="1">
          <mxGeometry x="380" y="25" width="100" height="25" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="external_layer_detail" name="6. 外部系统层详细设计">
    <mxGraphModel dx="1415" dy="818" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1400" pageHeight="900" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="external_title" value="外部系统层详细设计" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=24;fontStyle=1;fontColor=#1f497d;" parent="1" vertex="1">
          <mxGeometry x="500" y="20" width="400" height="40" as="geometry" />
        </mxCell>
        <mxCell id="jiandaoyun_integration" value="简道云API集成" style="swimlane;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=16;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="50" y="80" width="400" height="250" as="geometry" />
        </mxCell>
        <mxCell id="jdy_connection" value="API连接管理" style="swimlane;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="jiandaoyun_integration" vertex="1">
          <mxGeometry x="20" y="30" width="360" height="80" as="geometry" />
        </mxCell>
        <mxCell id="jdy_auth" value="1. 认证管理" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="jdy_connection" vertex="1">
          <mxGeometry x="10" y="25" width="100" height="25" as="geometry" />
        </mxCell>
        <mxCell id="jdy_token" value="2. Token刷新" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="jdy_connection" vertex="1">
          <mxGeometry x="130" y="25" width="100" height="25" as="geometry" />
        </mxCell>
        <mxCell id="jdy_operations" value="数据操作" style="swimlane;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="jiandaoyun_integration" vertex="1">
          <mxGeometry x="20" y="120" width="360" height="80" as="geometry" />
        </mxCell>
        <mxCell id="jdy_read" value="1. 数据读取" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="jdy_operations" vertex="1">
          <mxGeometry x="10" y="25" width="100" height="25" as="geometry" />
        </mxCell>
        <mxCell id="jdy_write" value="2. 数据写入" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="jdy_operations" vertex="1">
          <mxGeometry x="130" y="25" width="100" height="25" as="geometry" />
        </mxCell>
        <mxCell id="jdy_sync" value="3. 数据同步" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="jdy_operations" vertex="1">
          <mxGeometry x="250" y="25" width="100" height="25" as="geometry" />
        </mxCell>
        <mxCell id="ai_integration" value="AI服务集成" style="swimlane;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=16;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="480" y="80" width="400" height="250" as="geometry" />
        </mxCell>
        <mxCell id="ocr_service" value="OCR服务" style="swimlane;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="ai_integration" vertex="1">
          <mxGeometry x="20" y="30" width="360" height="80" as="geometry" />
        </mxCell>
        <mxCell id="image_preprocessing" value="1. 图像预处理" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="ocr_service" vertex="1">
          <mxGeometry x="10" y="25" width="100" height="25" as="geometry" />
        </mxCell>
        <mxCell id="text_recognition" value="2. 文字识别" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="ocr_service" vertex="1">
          <mxGeometry x="130" y="25" width="100" height="25" as="geometry" />
        </mxCell>
        <mxCell id="result_validation" value="3. 结果验证" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="ocr_service" vertex="1">
          <mxGeometry x="250" y="25" width="100" height="25" as="geometry" />
        </mxCell>
        <mxCell id="nlp_service" value="NLP服务" style="swimlane;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="ai_integration" vertex="1">
          <mxGeometry x="20" y="120" width="360" height="80" as="geometry" />
        </mxCell>
        <mxCell id="entity_extraction" value="1. 实体提取" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="nlp_service" vertex="1">
          <mxGeometry x="10" y="25" width="100" height="25" as="geometry" />
        </mxCell>
        <mxCell id="semantic_analysis" value="2. 语义分析" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="nlp_service" vertex="1">
          <mxGeometry x="130" y="25" width="100" height="25" as="geometry" />
        </mxCell>
        <mxCell id="data_structuring" value="3. 数据结构化" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="nlp_service" vertex="1">
          <mxGeometry x="250" y="25" width="100" height="25" as="geometry" />
        </mxCell>
        <mxCell id="third_party_integration" value="第三方API集成" style="swimlane;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=16;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="910" y="80" width="400" height="250" as="geometry" />
        </mxCell>
        <mxCell id="vendor_apis" value="API连接管理" style="swimlane;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="third_party_integration" vertex="1">
          <mxGeometry x="20" y="30" width="360" height="80" as="geometry" />
        </mxCell>
        <mxCell id="siemens_api" value="1. 认证管理" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="vendor_apis" vertex="1">
          <mxGeometry x="10" y="25" width="100" height="25" as="geometry" />
        </mxCell>
        <mxCell id="ab_api" value="2. Token刷新" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="vendor_apis" vertex="1">
          <mxGeometry x="130" y="25" width="100" height="25" as="geometry" />
        </mxCell>
        <mxCell id="cloud_apis" value="数据操作" style="swimlane;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="third_party_integration" vertex="1">
          <mxGeometry x="20" y="120" width="360" height="80" as="geometry" />
        </mxCell>
        <mxCell id="aws_api" value="1. 数据读取" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="cloud_apis" vertex="1">
          <mxGeometry x="10" y="25" width="100" height="25" as="geometry" />
        </mxCell>
        <mxCell id="azure_api" value="2. 数据写入" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="cloud_apis" vertex="1">
          <mxGeometry x="130" y="25" width="100" height="25" as="geometry" />
        </mxCell>
        <mxCell id="aliyun_api" value="3. 数据同步" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="cloud_apis" vertex="1">
          <mxGeometry x="250" y="25" width="100" height="25" as="geometry" />
        </mxCell>
        <mxCell id="integration_management" value="集成管理策略" style="swimlane;whiteSpace=wrap;html=1;fillColor=#f0f0f0;strokeColor=#666666;fontSize=16;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="50" y="350" width="1260" height="200" as="geometry" />
        </mxCell>
        <mxCell id="connection_mgmt" value="连接管理" style="swimlane;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="integration_management" vertex="1">
          <mxGeometry x="20" y="30" width="300" height="120" as="geometry" />
        </mxCell>
        <mxCell id="conn_pool" value="1. 连接池" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="connection_mgmt" vertex="1">
          <mxGeometry x="10" y="25" width="80" height="25" as="geometry" />
        </mxCell>
        <mxCell id="retry_logic" value="2. 重试机制" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="connection_mgmt" vertex="1">
          <mxGeometry x="110" y="25" width="80" height="25" as="geometry" />
        </mxCell>
        <mxCell id="circuit_breaker" value="3. 熔断器" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="connection_mgmt" vertex="1">
          <mxGeometry x="210" y="25" width="80" height="25" as="geometry" />
        </mxCell>
        <mxCell id="health_check" value="4. 健康检查" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="connection_mgmt" vertex="1">
          <mxGeometry x="10" y="60" width="80" height="25" as="geometry" />
        </mxCell>
        <mxCell id="failover" value="5. 故障转移" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="connection_mgmt" vertex="1">
          <mxGeometry x="110" y="60" width="80" height="25" as="geometry" />
        </mxCell>
        <mxCell id="load_balance" value="6. 负载均衡" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="connection_mgmt" vertex="1">
          <mxGeometry x="210" y="60" width="80" height="25" as="geometry" />
        </mxCell>
        <mxCell id="data_sync_mgmt" value="数据同步" style="swimlane;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="integration_management" vertex="1">
          <mxGeometry x="340" y="30" width="300" height="120" as="geometry" />
        </mxCell>
        <mxCell id="real_time_sync" value="1. 实时同步" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="data_sync_mgmt" vertex="1">
          <mxGeometry x="10" y="25" width="80" height="25" as="geometry" />
        </mxCell>
        <mxCell id="batch_sync" value="2. 批量同步" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="data_sync_mgmt" vertex="1">
          <mxGeometry x="110" y="25" width="80" height="25" as="geometry" />
        </mxCell>
        <mxCell id="incremental_sync" value="3. 增量同步" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="data_sync_mgmt" vertex="1">
          <mxGeometry x="210" y="25" width="80" height="25" as="geometry" />
        </mxCell>
        <mxCell id="conflict_resolution" value="4. 冲突解决" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="data_sync_mgmt" vertex="1">
          <mxGeometry x="10" y="60" width="80" height="25" as="geometry" />
        </mxCell>
        <mxCell id="data_validation" value="5. 数据验证" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="data_sync_mgmt" vertex="1">
          <mxGeometry x="110" y="60" width="80" height="25" as="geometry" />
        </mxCell>
        <mxCell id="sync_monitoring" value="6. 同步监控" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="data_sync_mgmt" vertex="1">
          <mxGeometry x="210" y="60" width="80" height="25" as="geometry" />
        </mxCell>
        <mxCell id="security_mgmt" value="安全管理" style="swimlane;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="integration_management" vertex="1">
          <mxGeometry x="660" y="30" width="300" height="120" as="geometry" />
        </mxCell>
        <mxCell id="api_key_mgmt" value="1. API密钥管理" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="security_mgmt" vertex="1">
          <mxGeometry x="10" y="25" width="80" height="25" as="geometry" />
        </mxCell>
        <mxCell id="encryption" value="2. 数据加密" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="security_mgmt" vertex="1">
          <mxGeometry x="110" y="25" width="80" height="25" as="geometry" />
        </mxCell>
        <mxCell id="access_control" value="3. 访问控制" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="security_mgmt" vertex="1">
          <mxGeometry x="210" y="25" width="80" height="25" as="geometry" />
        </mxCell>
        <mxCell id="audit_trail" value="4. 审计跟踪" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="security_mgmt" vertex="1">
          <mxGeometry x="10" y="60" width="80" height="25" as="geometry" />
        </mxCell>
        <mxCell id="compliance" value="5. 合规检查" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="security_mgmt" vertex="1">
          <mxGeometry x="110" y="60" width="80" height="25" as="geometry" />
        </mxCell>
        <mxCell id="threat_detection" value="6. 威胁检测" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="security_mgmt" vertex="1">
          <mxGeometry x="210" y="60" width="80" height="25" as="geometry" />
        </mxCell>
        <mxCell id="monitoring_alerting" value="监控告警" style="swimlane;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="integration_management" vertex="1">
          <mxGeometry x="980" y="30" width="260" height="120" as="geometry" />
        </mxCell>
        <mxCell id="api_monitoring" value="1. API监控" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="monitoring_alerting" vertex="1">
          <mxGeometry x="10" y="25" width="70" height="25" as="geometry" />
        </mxCell>
        <mxCell id="performance_metrics" value="2. 性能指标" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="monitoring_alerting" vertex="1">
          <mxGeometry x="90" y="25" width="70" height="25" as="geometry" />
        </mxCell>
        <mxCell id="error_tracking" value="3. 错误跟踪" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="monitoring_alerting" vertex="1">
          <mxGeometry x="170" y="25" width="70" height="25" as="geometry" />
        </mxCell>
        <mxCell id="alert_rules" value="4. 告警规则" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="monitoring_alerting" vertex="1">
          <mxGeometry x="10" y="60" width="70" height="25" as="geometry" />
        </mxCell>
        <mxCell id="notification" value="5. 通知机制" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="monitoring_alerting" vertex="1">
          <mxGeometry x="90" y="60" width="70" height="25" as="geometry" />
        </mxCell>
        <mxCell id="dashboard" value="6. 监控面板" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="monitoring_alerting" vertex="1">
          <mxGeometry x="170" y="60" width="70" height="25" as="geometry" />
        </mxCell>
        <mxCell id="implementation_steps" value="实施步骤：&#xa;1. API接口文档分析和适配器开发&#xa;2. 认证和授权机制实现&#xa;3. 数据映射和转换规则定义&#xa;4. 错误处理和重试机制&#xa;5. 监控和日志记录&#xa;6. 性能优化和缓存策略&#xa;7. 安全审计和合规检查&#xa;8. 集成测试和上线部署" style="rounded=1;whiteSpace=wrap;html=1;align=left;fillColor=#f0f0f0;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="50" y="570" width="1260" height="200" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
